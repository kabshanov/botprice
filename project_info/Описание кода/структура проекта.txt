## üì¶ –û–±—â–µ–µ –û–ø–∏—Å–∞–Ω–∏–µ –ü—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç ‚Äî —ç—Ç–æ Telegram‚Äë–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–¥—É–∫—Ç–∞—Ö –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤. –ë–æ—Ç:

- –ü–∞—Ä—Å–∏—Ç –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Å—Ç—Ä–æ—á–Ω–æ
- –í—ã–±–∏—Ä–∞–µ—Ç —É –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞: —Å—Ç—Ä–æ–∫—É —Å –∏–∑–Ω–∞—á–∞–ª—å–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º, –±—Ä–µ–Ω–¥, —Å—Ç—Ä–∞–Ω—É‚Äë–ø–æ—Å—Ç–∞–≤—â–∏–∫–∞, –Ω–∞–∑–≤–∞–Ω–∏–µ, –º–æ–¥–µ–ª—å–Ω—É—é –≥—Ä—É–ø–ø—É, —Ü–µ–Ω—É, –∏—Å—Ç–æ—á–Ω–∏–∫ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
- –†–∞–∑–ª–∏—á–∞–µ—Ç ¬´–ø—Ä–æ—Å—Ç—ã–µ¬ª —Ç–æ–≤–∞—Ä—ã –∏ ¬´—Å–ª–æ–∂–Ω—ã–µ¬ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, iPhone, Apple Watch –∏ –¥—Ä.), –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ MySQL –∏ –≤–µ–¥—ë—Ç –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ü–µ–Ω

---

## üìÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –§–∞–π–ª–æ–≤

1. **bot.py**
   –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞: –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç Telegram‚Äë–±–æ—Ç–∞, –ø–æ–¥–∫–ª—é—á–∞–µ—Ç –≤—Å–µ —Ö—ç–Ω–¥–ª–µ—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π.

2. **shared_data.py**
   –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ —Å–ª–æ–≤–∞—Ä–∏:
   - `PRODUCT_LIBRARY` ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
   - `COMPLEX_BRANDS`, `SPECIAL_RULES` ‚Äî –±—Ä–µ–Ω–¥—ã –∏ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è ¬´—Å–ª–æ–∂–Ω—ã—Ö¬ª –ø–∞—Ä—Å–∏–Ω–≥–æ–≤
   - `COUNTRY_EMOJI_MAP`, `TEXT_TO_FLAG` ‚Äî –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–ª–∞–≥–æ–≤ —Å—Ç—Ä–∞–Ω
   - –î—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞, –¥–æ–ø—É—Å—Ç–∏–º—ã–µ —ç–º–æ–¥–∑–∏ –∏ —Ç.–¥.)

3. **utils.py**
   –ì–ª–∞–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏:
   - `normalize_product_name`, `extract_data`, `process_emojis`
   - Fuzzy‚Äë–ø–æ–∏—Å–∫ –≤ `PRODUCT_LIBRARY` (`find_product_cached`)
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ ¬´—Å–ª–æ–∂–Ω—ã—Ö¬ª –±—Ä–µ–Ω–¥–æ–≤ (`find_complex_brand_model`, `handle_complex_brand`)
   - `message_handler` ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞: –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç —Å—Ç—Ä–æ–∫–∏, –≤—ã–∑—ã–≤–∞–µ—Ç `add_product` –∏–∑ `db_utils.py`

4. **apple_watch_utils.py**, **iphone_utils.py** –∏ —Ç.–ø.
   –ú–æ–¥—É–ª–∏ –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–ª–æ–∂–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä:
   - `parse_apple_watch_product`
   - `handle_apple_watch_product`, `find_best_apple_watch_model`

5. **db_utils.py**
   –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö MySQL —á–µ—Ä–µ–∑ `pymysql`:
   - `get_connection()` ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ `DB_CONFIG`
   - `init_db()` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü, –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç:
     1. `user_products` ‚Äî —Ç–µ–∫—É—â–∏–µ —Ç–æ–≤–∞—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
     2. `user_settings` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ (–∫–æ–ª–æ–Ω–∫–∏, —Ñ–æ—Ä–º–∞—Ç, –≥—Ä–∞–¥–∞—Ü–∏—è —Ü–µ–Ω)
     3. `bot_users` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–æ—Ç–∞
     4. `price_history_users` ‚Äî –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö —Ü–µ–Ω –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - CRUD‚Äë–æ–ø–µ—Ä–∞—Ü–∏–∏:
     - `add_product(...)` ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ `user_products` + –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ `price_history_users`
     - `get_all_products(user_id)` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
     - `clear_user_data(user_id)` ‚Äî —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–π—Å‚Äë–ª–∏—Å—Ç–∞:
     - `get_user_settings`, `save_user_settings`, `clear_user_settings`
   - –£—á—ë—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:
     - `track_user_activity(user_id, username)`
     - `get_all_bot_users()`

6. **sorting_rules.py**
   –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º:
   - `get_sort_key`, `sim_priority`, `capacity_priority` –∏ –¥—Ä.

---

## –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ö–µ–º–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è



## **–ö–æ—Ä–æ—Ç–∫–æ: —á–µ–≥–æ –º—ã –¥–æ–±–∏–≤–∞–ª–∏—Å—å**
üìÜ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

–î–æ–±–∞–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ API-–∫–ª—é—á–∞ —Å Google Drive.

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ä–µ–¥—É (—Ç–µ—Å—Ç –∏–ª–∏ –±–æ–µ–≤–æ–π —Å–µ—Ä–≤–µ—Ä) –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –Ω—É–∂–Ω—ã–π API-–∫–ª—é—á.

–û–±–Ω–æ–≤–ª–µ–Ω bot.service, —Ç–µ–ø–µ—Ä—å –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç BOT_ENV=production.

üõ†Ô∏è –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ API-–∫–ª—é—á–∞ —Å Google Drive

–î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è API-–∫–ª—é—á–∞ –∏ –µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å –¥–∏—Å–∫–∞ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ –¥–≤–∞ —Ñ–∞–π–ª–∞:

api_key_dev.txt ‚Äî –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥—ã.

api_key_prod.txt ‚Äî –¥–ª—è –±–æ–µ–≤–æ–π —Å—Ä–µ–¥—ã.

File ID:

api_key_dev.txt ‚Üí 17wmkEx_aomeLuSoUXzhy96Rt5VRi26Pv

api_key_prod.txt ‚Üí 1ZXRLIXgZgNEFRrW8JKuGJAPWv4Vz2Pg8

